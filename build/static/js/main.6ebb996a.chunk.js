(this["webpackJsonpapp-store-listing"]=this["webpackJsonpapp-store-listing"]||[]).push([[0],{1:function(e,t,n){e.exports={recomend:"style_recomend__1U23M",title:"style_title__1M8Bq",recomendItem:"style_recomendItem__-6ULD",name:"style_name__3wVWA",category:"style_category__3DrF2",appList:"style_appList__2gW29",appListItem:"style_appListItem__2yhS9",appIconOdd:"style_appIconOdd__1m06e",appIconEven:"style_appIconEven__2g3tY",appListInfo:"style_appListInfo__2MalN",comment:"style_comment__3cd3E",star:"style_star__3w_Ei"}},35:function(e,t,n){e.exports=n.p+"static/media/loading.344f3a29.gif"},36:function(e,t,n){e.exports=n(66)},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),i=n(5),s=n(15),l=n(32),u=n(33),p=n(13),m=n.n(p),f=n(18),d=n(19),h=n(2),g=n(34),y=n.n(g);function b(e){return new Promise((function(t,n){var a=e.url,r=e.searchKey;setTimeout((function(){y.a.get(a).then((function(n){var c=n.data.feed.entry;if(console.log(c),r&&(c=c.filter((function(e){return e["im:name"].label.inclouds(r)||e.category.attributes.label.inclouds(r)||e["im:artist"].label.inclouds(r)||e.summary.label.inclouds(r)}))),"appListData.json"===a){var o=e.current,i=e.pageSize,s=c.slice((o-1)*i,o*i);s.forEach((function(e){e.starNum=Math.floor(5*Math.random())+1,e.commentNum=Math.floor(1e3*Math.random())})),t({list:s,current:o,pageSize:i,total:c.length})}else{var l=c.slice(0,10);t({list:l})}})).catch((function(e){n(e)}))}),2e3)}))}var O=function(e){return"function"===typeof e},v=function(e){return null!=e&&"object"===typeof e&&(t=e,!Array.isArray(t));var t},j=function(e){return!0===v(e)&&"[object Object]"===Object.prototype.toString.call(e)},w=function(e){var t,n;return!1!==j(e)&&("function"===typeof(t=e.constructor)&&(n=t.prototype,!1!==j(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))},_=function(e,t){if(!e)throw new Error(t)};function E(e){return w(e)&&Object.keys(e).every((function(t){return O(e[t])}))}var L="/";function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t=Object.keys(e.reducers||[]).reduce((function(t,n){return I({},t,Object(h.a)({},n,(function(t){return{type:"".concat(e.namespace).concat(L).concat(n),payload:t}})))}),{}),n=Object.keys(e.effects||[]).reduce((function(n,a){return I({},n,Object(h.a)({},a,(function(n){return function(r,c){e.effects[a](n,(function(e,n){r(t[e](n))}),c)}})))}),{});return I({},t,{},n)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){var t=Object.keys(e.reducers||[]).reduce((function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,Object(h.a)({},"".concat(e.namespace).concat(L).concat(n),e.reducers[n]))}),{});return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state,a=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(a.type)?t[a.type](a.payload,n):n}}var A=[];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C,B=(function(e,t){var n=e.namespace,a=e.reducers,r=e.effects;_(n,"[model] namespace should be defined"),_("string"===typeof n,"[model] namespace should be string, but got ".concat(typeof n)),_(!t.some((function(e){return e.namespace===n})),"[model] namespace should be unique"),a&&_(E(a),"[model] reducers should be plain function object, but got ".concat(typeof a)),r&&_(E(r),"[model] effects should be plain function object, but got ".concat(typeof r))}(C={namespace:"main",state:{appList:{list:[],current:1,pageSize:10,loading:!1},recomend:{list:[],loading:!1}},reducers:{updateAppList:function(e,t){var n=e.list,a=e.current;if(e.loading){var r=x({},t.appList,{loading:!0});return Object.assign({},t,{appList:r})}var c=x({},e,{list:1===a?n:[].concat(Object(d.a)(t.appList.list),Object(d.a)(n)),loading:!1});return Object.assign({},t,{appList:c})},updateRecomend:function(e,t){var n=e.list;if(e.loading){var a=x({},t.recomend,{loading:!0});return Object.assign({},t,{recomend:a})}var r={list:n,loading:!1};return Object.assign({},t,{recomend:r})}},effects:{getAppList:function(){var e=Object(f.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("updateAppList",{loading:!0}),e.next=3,b(t);case 3:r=e.sent,n("updateAppList",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),getRecomend:function(){var e=Object(f.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("updateRecomend",{loading:!0}),e.next=3,b(t);case 3:r=e.sent,n("updateRecomend",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}},A),A.push(C.namespace),{actions:N(C),reducer:S(C)}),R=Object(i.c)({main:B.reducer}),M=n(8),F=n(9),K=n(11),z=n(10),W=n(12),T=n(7),q=n.n(T),J=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(K.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={focus:!1},n}return Object(W.a)(t,e),Object(F.a)(t,[{key:"handleCancel",value:function(){this.setState({focus:!1})}},{key:"render",value:function(){var e=this,t=this.state.focus,n=this.props,a=n.value,c=n.placeholder;return r.a.createElement("div",{className:q.a.searchBar},r.a.createElement("form",{className:q.a.searchForm,onSubmit:function(t){return e.handleSubmit(t)},action:"javascript:void(0);"},r.a.createElement("div",{className:q.a.inputBox},r.a.createElement("i",{className:q.a.searchIcon}),r.a.createElement("input",{ref:this.searchInput,type:"search",maxLength:20,value:a,placeholder:c,onFocus:function(t){return e.setState({focus:!0})},onChange:function(t){return e.handleChange(t)}}),a.length>0?r.a.createElement("i",{className:q.a.crossIcon,onClick:this.handleClear}):null)),r.a.createElement("button",{className:q.a.cancelBtn,style:{opacity:t?"1":"0"},onClick:function(){return e.handleCancel()}},"\u53d6\u6d88"))}}]),t}(a.PureComponent);J.defaultProps={value:"",placeholder:""};var U=J,H=n(35),V=n.n(H),X=function(e){function t(e){var n;return Object(M.a)(this,t),(n=Object(K.a)(this,Object(z.a)(t).call(this,e))).wrapper=r.a.createRef(),n}return Object(W.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,n=window.screen.height,a=function(){var e=t.wrapper.current.getBoundingClientRect().top;e&&e<n-12&&(console.log("loading more..."),t.props.loadMoreFn&&t.props.loadMoreFn())};window.addEventListener("scroll",(function(){"next"===t.props.status&&(e&&clearTimeout(e),e=setTimeout(a,50))}))}},{key:"render",value:function(){var e,t=(e={},Object(h.a)(e,"loading",r.a.createElement("img",{src:V.a,alt:"loading",style:{width:"32px"}})),Object(h.a)(e,"next","\u52a0\u8f7d\u66f4\u591a"),Object(h.a)(e,"isAll","\u6211\u662f\u6709\u5e95\u7ebf\u7684"),Object(h.a)(e,"noData","\u6682\u65e0\u6570\u636e"),e);return r.a.createElement("div",{ref:this.wrapper,style:{height:32,margin:"0 auto",textAlign:"center",lineHeight:"32px",fontSize:12,color:"#666"}},t[this.props.status])}}]),t}(a.Component),Y=n(1),$=n.n(Y),G=function(e){function t(){var e,n;Object(M.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(K.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={searchKey:""},n.getAppList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.props.appList.loading||n.props.getAppList({url:"appListData.json",current:e,pageSize:10,searchKey:n.state.searchKey})},n.getRecomend=function(){n.props.appList.loading||n.props.getRecomend({url:"recomendData.json",searchKey:n.state.searchKey})},n.handleChangeSearchInput=function(e){n.setState({searchKey:e}),n.getAppList(),n.getRecomend()},n}return Object(W.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.getAppList(),this.getRecomend()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.appList,c=n.recomend;return e=a.loading?"loading":a.list.length?a.list.length===a.total?"isAll":"next":"noData",r.a.createElement("div",null,r.a.createElement(U,{value:this.state.searchKey,onChange:this.handleChangeSearchInput}),c.loading?null:r.a.createElement("div",{className:$.a.recomend},r.a.createElement("h1",{className:$.a.title},"\u63a8\u4ecb"),r.a.createElement("ul",null,c.loading?"\u52a0\u8f7d\u4e2d":c.list.map((function(e){return r.a.createElement("li",{className:$.a.recomendItem},r.a.createElement("img",{src:e["im:image"][1].label,alt:""}),r.a.createElement("p",{className:$.a.name},e["im:name"].label),r.a.createElement("p",{className:$.a.category},e.category.attributes.label))})))),r.a.createElement("ul",{className:$.a.appList},a.list.map((function(e,t){return r.a.createElement("li",{key:e.id.attributes["im:id"]},r.a.createElement("div",{className:$.a.appListItem},r.a.createElement("em",null,t+1),r.a.createElement("img",{className:t%2===0?$.a.appIconOdd:$.a.appIconEven,src:e["im:image"][1].label,alt:""}),r.a.createElement("div",{className:$.a.appListInfo},r.a.createElement("p",{className:$.a.name},e["im:name"].label),r.a.createElement("p",{className:$.a.category},e.category.attributes.label),r.a.createElement("p",{className:$.a.comment},new Array(e.starNum).fill(0).map((function(e,t){return r.a.createElement("i",{className:$.a.star,style:{color:"#ff0"},key:t},"\u2605")})),new Array(5-e.starNum).fill(0).map((function(e,t){return r.a.createElement("i",{className:$.a.star,style:{color:"#ccc"},key:t},"\u2605")})),"(".concat(e.commentNum,")")))))}))),r.a.createElement(X,{loadMoreFn:function(){return t.getAppList(a.current+1)},status:e}))}}]),t}(a.Component);G.defaultProps={appList:{},recomend:{},getAppList:void 0,getRecomend:void 0};var Q=Object(s.b)((function(e){return{appList:e.main.appList,recomend:e.main.recomend}}),(function(e){return{getAppList:function(t){e(B.actions.getAppList(t))},getRecomend:function(t){e(B.actions.getRecomend(t))}}}))(G);n(65),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=Object(i.d)(R,Object(i.a)(l.a,Object(u.createLogger)()));o.a.render(r.a.createElement(s.a,{store:Z},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports={searchBar:"InputSearch_searchBar__2dtue",searchForm:"InputSearch_searchForm__CekC7",inputBox:"InputSearch_inputBox__2-v58",cancelBtn:"InputSearch_cancelBtn__LmXdI"}}},[[36,1,2]]]);
//# sourceMappingURL=main.6ebb996a.chunk.js.map